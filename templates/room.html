{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>True Quest</title>
    <link rel="icon" type="image/png" href="{% static 'images/icons/favicon2.png' %}"/>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
<div class="hero">
    <header class="header">
        <div class="topnav" id="myTopnav">
            <span class="logo">
                 <img src="{% static 'images/logo.png' %}" alt="">
            </span>
            <span class="pages-navigation">
                <a href="{% url 'index' %}">
                {% if request.session.lang == "ua" %}
                    Головна
                {% endif %}
                    {% if request.session.lang == "en" %}
                        Main
                    {% endif %}
                    {% if request.session.lang == "ru" %}
                        Главная
                    {% endif %}
                </a>
                <a href="{% url 'about' %}">
                {% if request.session.lang == "ua" %}
                    Про нас
                {% endif %}
                    {% if request.session.lang == "en" %}
                        About Us
                    {% endif %}
                    {% if request.session.lang == "ru" %}
                        О нас
                    {% endif %}
            </a>
                <a href="{% url 'franchise' %}">
                {% if request.session.lang == "ua" %}
                    Франшиза
                {% endif %}
                    {% if request.session.lang == "en" %}
                        Franchise
                    {% endif %}
                    {% if request.session.lang == "ru" %}
                        Франшиза
                    {% endif %}

            </a>
                <a href="{% url 'contacts' %}">
                {% if request.session.lang == "ua" %}
                    Контакти
                {% endif %}
                    {% if request.session.lang == "en" %}
                        Contacts
                    {% endif %}
                    {% if request.session.lang == "ru" %}
                        Контакты
                    {% endif %}

            </a>
            </span>
            <span class="navigation-preferences">
                <span class="language-preferences">
                    <a{% if request.session.lang == "ua" %} class="language-active"{% else %}
                                                            href="{% url 'change_language' "ua" %}"
                                                            class="language" {% endif %}>Ua</a>
                    <a{% if request.session.lang == "en" %} class="language-active" {% else %}
                                                            href="{% url 'change_language' "en" %}"
                                                            class="language" {% endif %}>Eng</a>
                    <a{% if request.session.lang == "ru" %} class="language-active" {% else %}
                                                            href="{% url 'change_language' "ru" %}"
                                                            class="language" {% endif %}>Ru</a>
                </span>
{#                <button type="button" class="btn">Квести</button>#}
                <span class="phone-preferences">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="18"
                         height="18"
                         viewBox="0 0 24 24"
                         fill="none"
                         stroke="#FFA70A"
                         stroke-width="3"
                         stroke-linecap="round"
                         stroke-linejoin="round"
                         class="feather feather-phone">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                    <p><a href="tel:380632022343">+38 063 20 223 43</a></p>
                </span>
            </span>

            <a href="javascript:void(0);" class="icon" onclick="myFunction()">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="24"
                     height="24"
                     viewBox="0 0 24 24"
                     fill="none"
                     stroke="white"
                     stroke-width="2"
                     stroke-linecap="round"
                     stroke-linejoin="round"
                     class="feather feather-menu">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </a>
        </div>
    </header>
    <div class="slideshow-container">

        <div class="mySlides fade">
            <img src="{% static 'images/room1_1.png' %}" style="width:100%;margin-top: 35px;">
        </div>

        <div class="mySlides fade">
            <img src="{% static 'images/room1_2.png' %}" style="width:100%;margin-top: 35px;">
        </div>

        <div class="mySlides fade">
            <img src="{% static 'images/room1_3.png' %}" style="width:100%;margin-top: 35px;">
        </div>

        <!-- Next and previous buttons -->
        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>
    </div>
    <br>

    <!-- The dots/circles -->
    <div style="text-align:center">
        <span class="dot" onclick="currentSlide(1)"></span>
        <span class="dot" onclick="currentSlide(2)"></span>
        <span class="dot" onclick="currentSlide(3)"></span>
    </div>

    <div class="room-details-content">
        <div class="short-description">
              <span class="room-complexity">
                {% for i in "12345" %}
                    {% if forloop.counter > quest_room.difficulty %}
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="18"
                             height="18"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="#5A402D"
                             stroke-width="3"
                             stroke-linecap="round"
                             stroke-linejoin="round"
                             class="feather feather-lock">
                         <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                         <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                     </svg>
                    {% else %}
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="18"
                             height="18"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="#FFA70A"
                             stroke-width="3"
                             stroke-linecap="round"
                             stroke-linejoin="round"
                             class="feather feather-lock">
                         <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                         <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                     </svg>
                    {% endif %}
                {% endfor %}
                  <p class="short-description-text">
                  {% if request.session.lang == "ua" %}
                      Складність
                  {% endif %}
                      {% if request.session.lang == "en" %}
                          Complexity
                      {% endif %}
                      {% if request.session.lang == "ru" %}
                          Сложность
                      {% endif %}
              </p>
              </span>
            <span class="room-time">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="18"
                     height="18"
                     viewBox="0 0 24 24"
                     fill="none"
                     stroke="#FFA70A"
                     stroke-width="3"
                     stroke-linecap="round"
                     stroke-linejoin="round"
                     class="feather feather-clock">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg> {{ quest_room.quest_duration }}
                <p class="short-description-text">
                    {% if request.session.lang == "ua" %}
                        Хвилин
                    {% endif %}
                    {% if request.session.lang == "en" %}
                        Minutes
                    {% endif %}
                    {% if request.session.lang == "ru" %}
                        Минут
                    {% endif %}
                </p>
            </span>
            <span class="room-players">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="18"
                     height="18"
                     viewBox="0 0 24 24"
                     fill="none"
                     stroke="#FFA70A"
                     stroke-width="3"
                     stroke-linecap="round"
                     stroke-linejoin="round"
                     class="feather feather-user">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg> {{ quest_room.min_person_amount }}-{{ quest_room.max_person_amount }}
                <p class="short-description-text">
                  {% if request.session.lang == "ua" %}
                      Гравці
                  {% endif %}
                    {% if request.session.lang == "en" %}
                        Players
                    {% endif %}
                    {% if request.session.lang == "ru" %}
                        Игроки
                    {% endif %}
                </p>
            </span>
        </div>
        <div class="quest-detailed-info">
            <div class="detailed-text">
                <p class="detailed-paragraph">
                    {% if request.session.lang == "ua" %}
                        {{ quest_room.description }}
                    {% endif %}
                    {% if request.session.lang == "en" %}
                        {{ quest_room.description_en }}
                    {% endif %}
                    {% if request.session.lang == "ru" %}
                        {{ quest_room.description_ru }}
                    {% endif %}
                </p>
            </div>
            <div class="questroom-contact">
              <span class="phone">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                     stroke="#FFA70A" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"
                     class="feather feather-phone"><path
                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                <p class="contact-paragraph "><a class="contact-text" href="tel:380632022343">+38 063 20 223 43</a></p>
              </span>
                <span class="email">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                     stroke="#FFA70A" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"
                     class="feather feather-mail"><path
                        d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline
                        points="22,6 12,13 2,6"></polyline></svg>
                <p class="contact-paragraph"><a class="contact-text" href="mailto:t.r.u.e.0q.u.e.s.t@gmail.com">t.r.u.e.0q.u.e.s.t@gmail.com</a></p>
              </span>
                <span class="location">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                       stroke="#FFA70A" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"
                       class="feather feather-map-pin"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle
                          cx="12" cy="10" r="3"></circle></svg>
                  <p class="contact-paragraph"><a class="contact-text"
                                                  href="https://goo.gl/maps/cvAy5TNhYX7N1zEb9">{{ quest_room.location }}<a/></p>
              </span>

            </div>
        </div>
        <div class="quest-booking-info">
            <form action="{% url 'book_room' quest_room.id %}" method="post">
                {% csrf_token %}
                <div class="form">
                    <div class="calendar">
                        <input type="date" name="date" onchange="get_data(this.value, {{ quest_room.pk }})"
                               placeholder="Виберіть дату" value="{{ current_date }}" class="date-input"
                               min="{{ current_date }}"
                               max="2021-06-15"
                               required>
                    </div>
                    <div class="booking-hours">
                        {% for reservation in reservations %}
                            <button type="button" value="{{ reservation.0 }}" id="{{ forloop.counter }}"
                                    class="hour-selector
                            {% if reservation.2 == "0" %}
                            disabled
                            {% endif %}
                            ">
                                {{ reservation.0 }} - {{ reservation.1 }}
                            </button>
                        {% endfor %}
                    </div>
                    <div class="registration-input-fields">
                        <div class="credentials">
                            <input type="text" name="name" class="input-booking" value="" placeholder="Name" required>
                            <input type="text" name="phone" class="input-booking" value="" placeholder="Phone" required>
                        </div>
                        <input type="text" id="time-att" name="chosen_time" value="" style="display: none" required>
                        <button type="submit" class="book-checkout">Забронювати</button>
                    </div>
                </div>
            </form>

        </div>
    </div>


</div>

<script type="text/javascript" src="{% static 'js/main.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery-3.6.0.js' %}"></script>

<script>
    $(document).on('click', 'button', function () {
        console.log($(this).hasClass('hour-selector'))
        if ($(this).hasClass('hour-selector')) {
            $(this).addClass('hour-selector selected').siblings().removeClass('selected')
            $("#time-att").attr("value", this.value)
        }


    })
    $('.book-checkout').on('click', function () {
        console.log("test")
        if ($("#time-att").value === "") {

        }
    });

    function get_data(chosen_date, room) {
        $.ajax({
            type: 'get',
            url: '{% url "get_reservations" %}',
            data: {"room_id": room, "chosen_date": chosen_date},
            datatype: 'json',
            success: function (data) {
                console.log(data)
                $(".hour-selector").removeClass("disabled")
                $(".hour-selector").removeClass("selected")
                $("#time-att").attr("value", "")
                for (c = 0; c < data.length; c++) {
                    console.log(data[c])
                    if (data[c][2] === "0") {
                        $("#" + (c + 1)).addClass("disabled")
                    }
                }
            },
            error: console.log("SSS"),

        });

    }
</script>
</body>
</html>